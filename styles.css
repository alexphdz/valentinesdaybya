/* ===== PIXEL LOVE QUEST ===== */
@import url('https://fonts.googleapis.com/css2?family=Press+Start+2P&display=swap');
*,*::before,*::after{margin:0;padding:0;box-sizing:border-box}
:root{
  --ndeep:#0B0E2D;--nmid:#151A42;--npurp:#2A1F5E;
  --orange:#FFB38A;--pink:#FFB7D5;--pinkd:#FF8EB8;
  --mint:#4A8B5A;--yellow:#FFF1A8;--lilac:#D8C6FF;
  --white:#FFF8F0;--brown:#8B6B4A;
  --ground:#1A3A28;--ground2:#254A35;
}
html,body{width:100%;height:100%;overflow:hidden;font-family:'Press Start 2P',monospace;image-rendering:pixelated;background:var(--ndeep)}
.scene{position:fixed;inset:0;display:none;flex-direction:column;align-items:center;justify-content:center}
.scene.active{display:flex}

/* Interactives */
.glow-hint{display:none}
.clickable-memory{cursor:pointer;transition:transform .2s,filter .2s}
.clickable-memory:hover{transform:scale(1.15);filter:brightness(1.3)}

/* TITLE */
#title-screen{background:linear-gradient(180deg,#0B0E2D,#151A42 40%,#2A1F5E 80%,#1E2558)}
.title-content{position:relative;z-index:10;text-align:center}
.game-title{font-size:clamp(18px,5vw,40px);color:var(--yellow);text-shadow:3px 3px 0 var(--pink),0 0 20px rgba(255,241,168,.3);letter-spacing:2px;animation:shine 3s ease-in-out infinite;margin-bottom:16px}
@keyframes shine{0%,100%{filter:brightness(1)}50%{filter:brightness(1.2)}}
.subtitle{font-size:clamp(8px,2vw,12px);color:var(--lilac);margin-bottom:32px;animation:fadeUp 1.5s ease-out}
#title-stars-bg,#title-floating{position:absolute;inset:0;pointer-events:none;overflow:hidden}
.title-bg-star{position:absolute;background:var(--white);opacity:.6;animation:sparkle 2s ease-in-out infinite}
.title-float-item{position:absolute;animation:floatY 6s ease-in-out infinite;font-size:16px;opacity:.5}

/* BUTTONS */
.pixel-btn{font-family:'Press Start 2P',monospace;font-size:clamp(10px,2.5vw,14px);padding:12px 28px;background:var(--pink);color:var(--white);border:4px solid var(--orange);cursor:pointer;box-shadow:4px 4px 0 rgba(0,0,0,.3);transition:transform .15s,box-shadow .15s}
.pixel-btn:hover{transform:translate(-2px,-2px);box-shadow:6px 6px 0 rgba(0,0,0,.4)}
.pixel-btn:active{transform:translate(2px,2px);box-shadow:2px 2px 0 rgba(0,0,0,.3)}
.pixel-btn-sm{font-size:10px;padding:8px 18px}
.pixel-btn-final{background:var(--orange);border-color:var(--pink)}

/* HUD */
#hud{position:fixed;top:12px;left:50%;transform:translateX(-50%);z-index:100;background:rgba(11,14,45,.85);padding:8px 20px;font-size:clamp(10px,2.5vw,14px);color:var(--lilac);border:3px solid var(--pink);display:flex;align-items:center;gap:6px}
.hud-heart{color:var(--pink);font-size:1.2em;animation:pulse 1.5s ease-in-out infinite}
@keyframes pulse{0%,100%{transform:scale(1)}50%{transform:scale(1.2)}}

/* SKY */
.game-sky{position:relative;width:100%;height:65%;background:linear-gradient(180deg,#0B0E2D,#151A42 50%,#1E2558 80%,#2A1F5E);overflow:hidden}

/* Moon */
#moon{position:absolute;top:6%;left:8%;width:64px;height:64px;z-index:5}
.moon-body{position:absolute;inset:0;background:var(--yellow);box-shadow:0 0 30px rgba(255,241,168,.4),0 0 60px rgba(255,241,168,.15)}
.moon-crater{position:absolute;background:rgba(0,0,0,.08)}
.moon-crater.c1{width:10px;height:10px;top:14px;left:16px}
.moon-crater.c2{width:8px;height:8px;top:32px;left:34px}

/* Saturn */
#saturn{position:absolute;top:10%;right:10%;width:48px;height:48px;z-index:5;animation:floatY 8s ease-in-out infinite}
.saturn-body{position:absolute;top:50%;left:50%;width:26px;height:26px;background:var(--lilac);transform:translate(-50%,-50%);box-shadow:0 0 10px rgba(216,198,255,.4)}
.saturn-ring{position:absolute;top:50%;left:50%;width:44px;height:10px;background:var(--orange);transform:translate(-50%,-50%);opacity:.6}

/* Clouds */
.cloud{position:absolute;background:rgba(255,255,255,.06)}
.cloud::after{content:'';position:absolute;background:rgba(255,255,255,.06)}
.cl1{width:80px;height:24px;top:40%;left:10%;animation:drift 25s linear infinite}
.cl1::after{width:40px;height:16px;top:-12px;left:20px}
.cl2{width:60px;height:20px;top:55%;left:55%;animation:drift 30s linear infinite 5s}
.cl2::after{width:32px;height:14px;top:-10px;left:14px}
.cl3{width:50px;height:18px;top:30%;left:80%;animation:drift 28s linear infinite 12s}
.cl3::after{width:28px;height:12px;top:-8px;left:10px}
@keyframes drift{0%{transform:translateX(0)}100%{transform:translateX(-120vw)}}

/* Stars */
#sky-stars-container{position:absolute;inset:0;z-index:3}
.sky-star{position:absolute;background:var(--yellow);cursor:pointer;width:6px;height:6px;padding:10px;margin:-10px;opacity:.7;animation:sparkle 3s ease-in-out infinite;box-shadow:0 0 4px rgba(255,241,168,.4)}
.sky-star.big{width:8px;height:8px}
.sky-star:hover{opacity:1;box-shadow:0 0 12px rgba(255,241,168,.8)}
.sky-star.clicked{animation:starPop .5s ease-out forwards;pointer-events:none}
@keyframes starPop{0%{transform:scale(1);opacity:1}50%{transform:scale(2.5);opacity:.8}100%{transform:scale(.5);opacity:.3}}
@keyframes sparkle{0%,100%{opacity:.2;transform:scale(.6)}50%{opacity:1;transform:scale(1)}}

/* Shooting star */
#shooting-star{position:absolute;top:-10%;left:110%;z-index:8;width:60px;height:60px;padding:20px;margin:-20px;animation:shoot 8s linear infinite}
.shooting-star-body{width:12px;height:12px;background:var(--white);box-shadow:0 0 14px var(--yellow),0 0 30px rgba(255,241,168,.4);position:absolute;top:20px;left:20px}
.shooting-star-tail{position:absolute;top:16px;left:32px;width:50px;height:4px;background:linear-gradient(90deg,var(--yellow),transparent);opacity:.7;transform:rotate(30deg)}
@keyframes shoot{0%{top:5%;left:105%;opacity:0}5%{opacity:1}35%{top:45%;left:-15%;opacity:1}42%{opacity:0}100%{top:5%;left:105%;opacity:0}}

/* Butterflies */
.butterfly{position:absolute;z-index:7;width:44px;height:34px;padding:12px;margin:-12px}
#butterfly1{top:60%;left:20%;animation:bf1 14s ease-in-out infinite}
#butterfly2{top:30%;left:65%;animation:bf2 18s ease-in-out infinite}
.bfly-body{position:absolute;top:50%;left:50%;width:4px;height:12px;background:#5A3A6A;transform:translate(-50%,-50%);z-index:2}
.bfly-wing{position:absolute;top:50%;width:16px;height:20px;transform:translateY(-50%);animation:flap .6s ease-in-out infinite}
.bfly-wing.left{right:52%;background:var(--pink);transform-origin:right center}
.bfly-wing.right{left:52%;background:var(--lilac);transform-origin:left center}
@keyframes flap{0%,100%{transform:translateY(-50%) scaleX(1)}50%{transform:translateY(-50%) scaleX(.3)}}
@keyframes bf1{0%,100%{top:60%;left:20%}25%{top:42%;left:42%}50%{top:55%;left:65%}75%{top:38%;left:35%}}
@keyframes bf2{0%,100%{top:30%;left:65%}25%{top:50%;left:42%}50%{top:22%;left:28%}75%{top:45%;left:55%}}

/* Star popup */
.star-popup{position:fixed;z-index:250;display:flex;flex-direction:column;align-items:center;pointer-events:none;animation:smf 2s ease-out forwards}
.star-popup.hidden{display:none}
.star-popup-heart{font-size:36px;color:var(--pink);text-shadow:0 0 12px rgba(255,183,213,.5);animation:pulse 1s ease-in-out infinite}
.star-popup-text{font-family:'Press Start 2P',monospace;font-size:10px;color:var(--yellow);text-shadow:0 0 8px rgba(255,241,168,.5);margin-top:4px}
@keyframes smf{0%{opacity:0;transform:translateY(0) scale(.8)}20%{opacity:1;transform:translateY(-10px) scale(1)}80%{opacity:1;transform:translateY(-30px) scale(1)}100%{opacity:0;transform:translateY(-50px) scale(.8)}}

/* GROUND */
.game-ground{position:relative;width:100%;height:35%;background:linear-gradient(180deg,var(--ground),#0F2A1A);overflow:hidden}
.game-ground::before{content:'';position:absolute;top:0;left:0;right:0;height:8px;background:repeating-linear-gradient(90deg,var(--ground2) 0 4px,var(--ground) 4px 8px)}

/* Trees */
#tree{position:absolute;left:4%;bottom:0;width:90px;height:130px;z-index:5}
#tree2{position:absolute;left:48%;bottom:0;width:60px;height:90px;z-index:4;transform:scaleX(-1)}
.tree-crown{position:absolute;top:16px;left:50%;transform:translateX(-50%);width:68px;height:56px;background:var(--mint);box-shadow:inset -8px -8px 0 rgba(0,0,0,.15)}
.tree-crown-top{position:absolute;top:0;left:50%;transform:translateX(-50%);width:44px;height:22px;background:var(--mint)}
.tree-trunk{position:absolute;bottom:0;left:50%;transform:translateX(-50%);width:16px;height:50px;background:var(--brown);box-shadow:inset -4px 0 0 #6B5038}
#tree2 .tree-crown{width:48px;height:40px;top:12px}
#tree2 .tree-crown-top{width:32px;height:16px}
#tree2 .tree-trunk{height:38px;width:12px}

/* Clover */
#clover{position:absolute;left:22%;bottom:15%;z-index:7;width:28px;height:36px}
.clover-leaf{position:absolute;width:10px;height:10px;background:#2ECC40}
.cl-tl{top:0;left:2px}.cl-tr{top:0;right:2px}.cl-bl{top:10px;left:2px}.cl-br{top:10px;right:2px}
.clover-stem{position:absolute;bottom:0;left:50%;transform:translateX(-50%);width:3px;height:16px;background:#1B8C2A}

/* Map table */
#map-table{position:absolute;left:62%;bottom:8px;z-index:7;width:40px;height:36px}
.table-top{position:absolute;top:0;left:0;width:40px;height:10px;background:#8B6B4A;box-shadow:inset -3px -3px 0 rgba(0,0,0,.1)}
.table-leg{position:absolute;top:10px;width:4px;height:18px;background:#6B5038}
.tl-l{left:4px}.tl-r{right:4px}
.map-paper{position:absolute;top:2px;left:8px;width:24px;height:6px;background:#F5E6C8}
.map-x{position:absolute;top:3px;left:18px;width:4px;height:4px;background:#CC4444}

/* Book */
#book{position:absolute;left:35%;bottom:10%;z-index:7;width:28px;height:22px}
.book-cover{position:absolute;inset:0;background:#8B4513;box-shadow:inset -3px -3px 0 rgba(0,0,0,.15)}
.book-pages{position:absolute;top:2px;right:0;width:4px;height:18px;background:var(--white)}
.book-spine{position:absolute;top:0;left:0;width:3px;height:100%;background:#6B3410}

/* Pizza */
#pizza{position:absolute;left:72%;bottom:20%;z-index:7;width:32px;height:32px}
.pizza-base{position:absolute;inset:0;background:#E8B830;box-shadow:inset -3px -3px 0 rgba(0,0,0,.1)}
.pizza-pep{position:absolute;width:6px;height:6px;background:#CC3333}
.p1{top:6px;left:6px}.p2{top:6px;right:8px}.p3{bottom:8px;left:10px}.p4{bottom:6px;right:6px}

/* Cat - walks, plays, sleeps */
#cat{position:absolute;right:20%;bottom:6px;z-index:8;width:44px;height:32px;transition:transform .3s}
.cat-body{position:absolute;bottom:0;left:4px;width:32px;height:18px;background:#D4A574;box-shadow:inset -3px -3px 0 rgba(0,0,0,.08)}
.cat-head{position:absolute;bottom:12px;right:2px;width:18px;height:16px;background:#D4A574}
.cat-ear{position:absolute;width:7px;height:9px;background:#D4A574;bottom:26px}
.cat-ear.ear-l{right:16px}.cat-ear.ear-r{right:4px}
.cat-ear::after{content:'';position:absolute;bottom:1px;left:1px;width:5px;height:6px;background:var(--pink)}
.cat-tail{position:absolute;bottom:4px;left:-6px;width:12px;height:6px;background:#D4A574;animation:wag 2s ease-in-out infinite;transform-origin:right center}
@keyframes wag{0%,100%{transform:rotate(-10deg)}50%{transform:rotate(10deg)}}
.cat-zzz{position:absolute;top:-12px;right:0;color:var(--lilac);font-size:8px;animation:zzz 2s ease-in-out infinite;opacity:.7}
@keyframes zzz{0%,100%{transform:translateY(0);opacity:.4}50%{transform:translateY(-6px);opacity:.8}}
/* Cat walk — walks, stops, pounces, walks back */
#cat.walking{animation:catWalk 10s ease forwards}
#cat.walking .cat-zzz{display:none}
#cat.walking .cat-tail{animation:wagFast .4s ease-in-out infinite}
@keyframes wagFast{0%,100%{transform:rotate(-20deg)}50%{transform:rotate(20deg)}}
@keyframes catWalk{
  0%{transform:scaleX(1) translateX(0) translateY(0)}
  20%{transform:scaleX(1) translateX(30px) translateY(0)}
  25%{transform:scaleX(1) translateX(32px) translateY(-12px)}
  28%{transform:scaleX(1) translateX(45px) translateY(0)}
  35%{transform:scaleX(1) translateX(50px) translateY(0)}
  38%{transform:scaleX(1) translateX(52px) translateY(-8px)}
  40%{transform:scaleX(1) translateX(60px) translateY(0)}
  50%{transform:scaleX(-1) translateX(-60px) translateY(0)}
  55%{transform:scaleX(-1) translateX(-55px) translateY(-14px)}
  58%{transform:scaleX(-1) translateX(-40px) translateY(0)}
  70%{transform:scaleX(-1) translateX(-20px) translateY(0)}
  75%{transform:scaleX(-1) translateX(-18px) translateY(-6px)}
  78%{transform:scaleX(-1) translateX(-10px) translateY(0)}
  90%{transform:scaleX(-1) translateX(0) translateY(0)}
  95%{transform:scaleX(1) translateX(0) translateY(0)}
  100%{transform:scaleX(1) translateX(0) translateY(0)}
}
/* Cat paused (touched) */
#cat.paused{animation-play-state:paused}

/* Pom - walks, jumps, plays */
#pom{position:absolute;left:12%;bottom:6px;z-index:8;width:40px;height:30px;transition:transform .3s}
.pom-body{position:absolute;bottom:0;left:2px;width:30px;height:20px;background:#FFD4A0;box-shadow:inset -3px -3px 0 rgba(0,0,0,.06)}
.pom-head{position:absolute;bottom:14px;left:0;width:20px;height:18px;background:#FFD4A0}
.pom-head::after{content:'';position:absolute;bottom:5px;left:12px;width:3px;height:3px;background:#2A1F5E}
.pom-ear{position:absolute;width:7px;height:7px;background:#E8B870;bottom:30px}
.pom-ear.ear-l{left:0}.pom-ear.ear-r{left:14px}
.pom-tail{position:absolute;bottom:12px;right:-4px;width:10px;height:14px;background:#FFD4A0;animation:wag 1.5s ease-in-out infinite;transform-origin:left bottom}
.pom-zzz{position:absolute;top:-10px;left:4px;color:var(--orange);font-size:8px;animation:zzz 2.5s ease-in-out infinite;opacity:.7}
/* Pom walk — bouncy happy walk with jumps and spins */
#pom.walking{animation:pomWalk 12s ease forwards}
#pom.walking .pom-zzz{display:none}
#pom.walking .pom-tail{animation:wagFast .3s ease-in-out infinite}
@keyframes pomWalk{
  0%{transform:scaleX(1) translateX(0) translateY(0) rotate(0deg)}
  10%{transform:scaleX(1) translateX(20px) translateY(-10px) rotate(0deg)}
  13%{transform:scaleX(1) translateX(28px) translateY(0) rotate(0deg)}
  22%{transform:scaleX(1) translateX(45px) translateY(-16px) rotate(0deg)}
  25%{transform:scaleX(1) translateX(55px) translateY(0) rotate(0deg)}
  30%{transform:scaleX(1) translateX(60px) translateY(-4px) rotate(10deg)}
  33%{transform:scaleX(1) translateX(65px) translateY(0) rotate(0deg)}
  38%{transform:scaleX(1) translateX(75px) translateY(-12px) rotate(0deg)}
  42%{transform:scaleX(1) translateX(80px) translateY(0) rotate(0deg)}
  50%{transform:scaleX(-1) translateX(-80px) translateY(0) rotate(0deg)}
  58%{transform:scaleX(-1) translateX(-65px) translateY(-14px) rotate(0deg)}
  62%{transform:scaleX(-1) translateX(-55px) translateY(0) rotate(0deg)}
  68%{transform:scaleX(-1) translateX(-40px) translateY(-10px) rotate(-8deg)}
  72%{transform:scaleX(-1) translateX(-30px) translateY(0) rotate(0deg)}
  82%{transform:scaleX(-1) translateX(-12px) translateY(-8px) rotate(0deg)}
  86%{transform:scaleX(-1) translateX(0) translateY(0) rotate(0deg)}
  92%{transform:scaleX(1) translateX(0) translateY(0) rotate(0deg)}
  100%{transform:scaleX(1) translateX(0) translateY(0) rotate(0deg)}
}
/* Pom paused */
#pom.paused{animation-play-state:paused}

/* Bunny — hops across the ground */
#bunny{position:absolute;bottom:10px;left:28%;z-index:20;width:44px;height:40px;padding:10px;margin:-10px;animation:bunHop 18s linear infinite}
.bunny-body{position:absolute;bottom:0;left:8px;width:28px;height:22px;background:#F0E0F0;box-shadow:inset -3px -3px 0 rgba(0,0,0,.06)}
.bunny-ear{position:absolute;width:8px;height:18px;background:#F0E0F0;top:-14px}
.bunny-ear::after{content:'';position:absolute;inset:2px;width:4px;height:14px;background:var(--pink);margin:0 auto}
.ear-l{left:10px}.ear-r{left:24px}
.bunny-tail{position:absolute;bottom:6px;left:0;width:8px;height:8px;background:var(--white)}
.bunny-eye{position:absolute;bottom:13px;right:12px;width:4px;height:4px;background:var(--ndeep)}
/* Bunny hops instead of sliding */
@keyframes bunHop{
  0%{left:-5%;transform:scaleX(1) translateY(0)}
  3%{left:0%;transform:scaleX(1) translateY(-14px)}
  6%{left:5%;transform:scaleX(1) translateY(0)}
  9%{left:5%;transform:scaleX(1) translateY(0)}
  12%{left:10%;transform:scaleX(1) translateY(-12px)}
  15%{left:15%;transform:scaleX(1) translateY(0)}
  18%{left:15%;transform:scaleX(1) translateY(0)}
  21%{left:20%;transform:scaleX(1) translateY(-16px)}
  24%{left:27%;transform:scaleX(1) translateY(0)}
  27%{left:27%;transform:scaleX(1) translateY(0)}
  30%{left:34%;transform:scaleX(1) translateY(-10px)}
  33%{left:40%;transform:scaleX(1) translateY(0)}
  36%{left:40%;transform:scaleX(1) translateY(0)}
  39%{left:47%;transform:scaleX(1) translateY(-18px)}
  42%{left:55%;transform:scaleX(1) translateY(0)}
  45%{left:55%;transform:scaleX(1) translateY(0)}
  47%{left:60%;transform:scaleX(1) translateY(-8px)}
  49%{left:65%;transform:scaleX(1) translateY(0)}
  50%{left:65%;transform:scaleX(-1) translateY(0)}
  53%{left:60%;transform:scaleX(-1) translateY(-14px)}
  56%{left:55%;transform:scaleX(-1) translateY(0)}
  59%{left:55%;transform:scaleX(-1) translateY(0)}
  62%{left:48%;transform:scaleX(-1) translateY(-12px)}
  65%{left:42%;transform:scaleX(-1) translateY(0)}
  68%{left:42%;transform:scaleX(-1) translateY(0)}
  71%{left:35%;transform:scaleX(-1) translateY(-16px)}
  74%{left:28%;transform:scaleX(-1) translateY(0)}
  77%{left:28%;transform:scaleX(-1) translateY(0)}
  80%{left:22%;transform:scaleX(-1) translateY(-10px)}
  83%{left:15%;transform:scaleX(-1) translateY(0)}
  86%{left:15%;transform:scaleX(-1) translateY(0)}
  89%{left:8%;transform:scaleX(-1) translateY(-14px)}
  92%{left:0%;transform:scaleX(-1) translateY(0)}
  95%{left:0%;transform:scaleX(-1) translateY(0)}
  97%{left:-3%;transform:scaleX(-1) translateY(-8px)}
  99%{left:-5%;transform:scaleX(-1) translateY(0)}
  100%{left:-5%;transform:scaleX(1) translateY(0)}
}
/* Bunny paused */
#bunny.paused{animation-play-state:paused}

/* House */
#house{position:absolute;right:4%;bottom:0;width:110px;height:110px;z-index:5}
.house-roof{position:absolute;top:0;left:-8px;right:-8px;height:36px;background:#7A5A3A;clip-path:polygon(50% 0%,0% 100%,100% 100%)}
.house-wall{position:absolute;bottom:0;left:0;right:0;height:74px;background:#3D2A4A;box-shadow:inset -4px -4px 0 rgba(0,0,0,.2)}
#house-door{position:absolute;bottom:0;left:50%;transform:translateX(-50%);width:26px;height:40px;background:#5A3A2A;border:3px solid #7A5A3A;border-bottom:none;z-index:6}
.door-knob{position:absolute;top:50%;right:4px;width:4px;height:4px;background:var(--yellow)}
.house-window{position:absolute;width:18px;height:18px;background:#2A4A6A;top:46px;border:2px solid #5A4A3A;overflow:hidden}
.hw-l{left:14px}.hw-r{right:14px}
.win-glow{position:absolute;inset:0;background:var(--yellow);opacity:.4;animation:wFlick 4s ease-in-out infinite}
@keyframes wFlick{0%,100%{opacity:.3}50%{opacity:.6}}

/* Mailbox */
#mailbox{position:absolute;right:18%;bottom:4px;z-index:7;width:28px;height:44px}
.mailbox-box{position:absolute;top:0;left:0;width:28px;height:18px;background:#CC4444;box-shadow:inset -3px -3px 0 rgba(0,0,0,.15)}
.mailbox-flag{position:absolute;top:2px;right:-5px;width:7px;height:9px;background:var(--yellow)}
.mailbox-post{position:absolute;top:18px;left:50%;transform:translateX(-50%);width:6px;height:26px;background:#8B6B4A}

/* Lantern */
#lantern{position:absolute;left:42%;bottom:0;width:32px;height:72px;z-index:6}
.lantern-post{position:absolute;bottom:0;left:50%;transform:translateX(-50%);width:6px;height:52px;background:#5A5A5A}
.lantern-light{position:absolute;top:8px;left:50%;transform:translateX(-50%);width:18px;height:18px;background:var(--yellow);box-shadow:0 0 14px rgba(255,241,168,.6)}
.lantern-glow{position:absolute;top:0;left:50%;transform:translateX(-50%);width:50px;height:50px;background:radial-gradient(circle,rgba(255,241,168,.15),transparent 70%);pointer-events:none}

/* Float heart */
#float-heart{position:absolute;left:56%;bottom:45%;z-index:9;width:44px;height:44px;animation:floatY 3s ease-in-out infinite}
.float-heart-icon{font-size:32px;color:var(--pink);text-shadow:0 0 16px rgba(255,183,213,.5)}

/* Flower garden */
#flower-garden{position:absolute;inset:0;z-index:4}
.garden-flower{position:absolute;cursor:pointer;transition:transform .2s,filter .2s;animation:sway 3s ease-in-out infinite}
.garden-flower:hover{transform:scale(1.2) rotate(5deg);filter:brightness(1.3)}
.garden-flower .fh{margin:0 auto}
.garden-flower .fs{margin:0 auto;background:#3D7A4A}
/* Rose inner detail */
.garden-flower .fh.rose::after{content:'';position:absolute;top:25%;left:25%;width:50%;height:50%;background:rgba(255,255,255,.15)}
@keyframes sway{0%,100%{transform:rotate(0)}25%{transform:rotate(3deg)}75%{transform:rotate(-3deg)}}

/* Ground clouds */
.ground-cloud{position:absolute;background:rgba(255,255,255,.04);z-index:2}
.ground-cloud::after{content:'';position:absolute;background:rgba(255,255,255,.04)}
.gc1{width:90px;height:14px;bottom:50%;left:25%;animation:drift 35s linear infinite}
.gc1::after{width:50px;height:10px;top:-8px;left:20px}
.gc2{width:70px;height:12px;bottom:30%;left:65%;animation:drift 40s linear infinite 10s}
.gc2::after{width:40px;height:8px;top:-6px;left:15px}

/* Fireflies */
.firefly{position:absolute;width:5px;height:5px;background:var(--yellow);box-shadow:0 0 8px rgba(255,241,168,.6),0 0 16px rgba(255,241,168,.3);animation:ffFloat 6s ease-in-out infinite;opacity:0;pointer-events:none}
@keyframes ffFloat{0%,100%{opacity:0;transform:translate(0,0)}20%{opacity:.8}50%{opacity:.6;transform:translate(15px,-20px)}80%{opacity:.8;transform:translate(-10px,-10px)}}

/* POPUPS */
.popup{position:fixed;inset:0;z-index:200;display:flex;align-items:center;justify-content:center;background:rgba(11,14,45,.65);backdrop-filter:blur(3px);animation:fadeIn .3s}
.popup.hidden{display:none}
.popup-content{background:var(--nmid);border:4px solid var(--pink);padding:28px 36px;text-align:center;max-width:360px;box-shadow:6px 6px 0 rgba(0,0,0,.3),0 0 40px rgba(255,183,213,.1)}
#popup-text{font-size:11px;color:var(--lilac);line-height:2.2;margin-bottom:18px}

.special-popup{position:fixed;inset:0;z-index:300;display:flex;align-items:center;justify-content:center;background:rgba(5,8,24,.85);backdrop-filter:blur(5px);animation:fadeIn .5s}
.special-popup.hidden{display:none}
.special-popup-content{text-align:center;animation:specIn 1s ease-out}
.special-text{font-size:clamp(14px,4vw,28px);color:var(--yellow);text-shadow:0 0 30px rgba(255,241,168,.5),3px 3px 0 var(--orange);line-height:2;margin-bottom:20px}
.special-heart{font-size:52px;color:var(--pink);animation:pulse 1s ease-in-out infinite;margin-bottom:20px;text-shadow:0 0 20px rgba(255,183,213,.5)}
@keyframes specIn{from{opacity:0;transform:scale(.5)}to{opacity:1;transform:scale(1)}}

/* Particles */
.particle{position:fixed;width:5px;height:5px;pointer-events:none;z-index:150;animation:pRise 1.5s ease-out forwards}
@keyframes pRise{0%{opacity:1;transform:translateY(0) scale(1)}100%{opacity:0;transform:translateY(-70px) scale(.3)}}

/* FINAL */
#final-screen{background:linear-gradient(180deg,#050818,#0B0E2D 30%,#1E2558 70%,#2A1F5E)}
#final-stars{position:absolute;inset:0;overflow:hidden}
.final-star{position:absolute;width:4px;height:4px;background:var(--yellow);animation:sparkle 2s ease-in-out infinite}
.final-content{position:relative;z-index:10;text-align:center;animation:fadeUp 1s ease-out}
.final-title{font-size:clamp(16px,4vw,32px);color:var(--yellow);text-shadow:3px 3px 0 var(--orange),0 0 20px rgba(255,241,168,.3);margin-bottom:24px}
.final-heart{animation:pulse 1s ease-in-out infinite;display:inline-block}
.final-text{font-size:clamp(8px,2vw,12px);color:var(--white);line-height:2.4;margin-bottom:16px;text-shadow:1px 1px 0 rgba(0,0,0,.4)}
.final-subtext{font-size:clamp(8px,2vw,11px);color:var(--pink);margin-bottom:28px;animation:pulse 2s ease-in-out infinite}

@keyframes floatY{0%,100%{transform:translateY(0)}50%{transform:translateY(-8px)}}
@keyframes fadeIn{from{opacity:0}to{opacity:1}}
@keyframes fadeUp{from{opacity:0;transform:translateY(20px)}to{opacity:1;transform:translateY(0)}}

/* VALENTINE FINALE */
.valentine-overlay{position:fixed;inset:0;z-index:500;display:flex;flex-direction:column;align-items:center;justify-content:center;pointer-events:none}
.valentine-overlay.hidden{display:none}
.valentine-heart{font-size:40px;color:#CC2244;opacity:0;transform:scale(0);transition:transform 3s cubic-bezier(.17,.67,.29,1.2),opacity .5s,font-size 3s cubic-bezier(.17,.67,.29,1.2);text-shadow:0 0 30px rgba(204,34,68,.6)}
.valentine-heart.grow{opacity:1;transform:scale(1);font-size:clamp(120px,40vw,280px)}
.valentine-heart.full{font-size:clamp(160px,50vw,340px);color:rgba(204,34,68,.2);text-shadow:0 0 80px rgba(204,34,68,.3);transition:all 1.5s ease}
.valentine-msg{position:absolute;opacity:0;transform:translateY(20px);transition:opacity 1.2s ease,transform 1.2s ease;text-align:center;pointer-events:auto}
.valentine-msg.visible{opacity:1;transform:translateY(0)}
.valentine-msg p{font-family:'Press Start 2P',monospace;font-size:clamp(10px,3vw,18px);color:var(--yellow);text-shadow:2px 2px 0 var(--orange),0 0 20px rgba(255,241,168,.4);line-height:2.4;margin-bottom:16px}
.valentine-msg .valentine-sign{font-size:clamp(8px,2vw,13px);color:var(--pink);animation:pulse 2s ease-in-out infinite}

/* Night to day transition */
.game-sky.to-day{animation:nightToDay 3s ease forwards}
@keyframes nightToDay{
  0%{background:linear-gradient(180deg,#0B0E2D,#151A42 50%,#1E2558 80%,#2A1F5E)}
  40%{background:linear-gradient(180deg,#1A1040,#3A2060 30%,#7A4A6A 60%,#CC7A5A)}
  70%{background:linear-gradient(180deg,#4A6EA0,#7AACDA 40%,#B8D8F0 70%,#FFD4A0)}
  100%{background:linear-gradient(180deg,#5A8EC0,#8AC4F0 35%,#C8E4FF 65%,#FFE8C0)}
}
.game-sky.to-day .cloud{background:rgba(255,255,255,.3)}
.game-sky.to-day .cloud::after{background:rgba(255,255,255,.3)}
.game-sky.to-day .sky-star{opacity:0!important;transition:opacity 2s}
.game-sky.to-day #shooting-star{opacity:0!important;transition:opacity 1s}

.game-sky.complete{animation:skyD 2s forwards}
@keyframes skyD{to{background:linear-gradient(180deg,#050818,#0B0E2D 40%,#1E2558)}}
.extra-star{position:absolute;width:4px;height:4px;background:var(--yellow);animation:sparkle 1.5s ease-in-out infinite}
